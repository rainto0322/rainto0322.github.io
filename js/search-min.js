(async()=>{const e=e=>document.getElementById(e),t=e=>document.createElement(e),s=await(async()=>{const e=await fetch(document.currentScript.getAttribute("path"));return await e.json()})(),n=(e,t)=>{e.appendChild(t)};if(!s)return;const r=e("s-res");e("s-txt").focus(),e("s-txt").oninput=c=>{r.innerHTML="";const o=c.target.value.trim().split(/[\s\-]+/);if(!o[0])return;e("s-res").innerHTML="";const a=document.createDocumentFragment();s.forEach((e=>{var s=e.title.trim(),r=e.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),c=-1,i=-1;for(const d of o){if(c=s.indexOf(d),i=r.indexOf(d),c<0&&i<0)return;const o=new RegExp(`(${d})`,"gi"),l='<span class="s-key">$1</span>',u=s.replace(o,l),p=r.substring(i-10,i+50).replace(o,l),m=t("a"),f=t("span"),w=t("span");m.href=e.link,m.className="s-item",f.innerHTML=u,w.innerHTML=p+"...",f.className="s-title",w.className="s-cont",n(m,f),n(m,w),n(a,m)}})),n(r,a)};let c=0;window.addEventListener("keydown",(t=>{let s=e("s-res").childNodes.length;"ArrowDown"===t.code&&(c<s?c++:c=1,e("s-res").childNodes[c-1].focus()),"ArrowUp"===t.code&&(c>1?c--:c=s,e("s-res").childNodes[c-1].focus()),"Escape"===t.code&&e("s-txt").focus()}))})();